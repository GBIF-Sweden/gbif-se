<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" type="image/x-icon" href="/assets/images/favicon.ico">
  {%- seo -%}
  <link rel="stylesheet" href="/assets/css/main.css?{{ "now" | date: "%Y%m%d%H%M" }}">
  {%- if page.load_leaflet == true -%}
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.3/dist/leaflet.css">
    <script src="https://unpkg.com/leaflet@1.9.3/dist/leaflet.js"></script>
  {%- endif -%}
  {%- if page.load_tablefilter == true -%}
    <script src="https://unpkg.com/tablefilter@0.7.3/dist/tablefilter/tablefilter.js"></script>
  {%- endif -%}
  {%- if page.load_calendar == true -%}
    <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.js"></script>
    <script>
      document.addEventListener('DOMContentLoaded', function() {
        var calendarEl = document.getElementById('calendar');
        var calendar = new FullCalendar.Calendar(calendarEl, {
          initialView: 'dayGridMonth',
          headerToolbar: {
            left: 'prev',
            center: 'title',
            right: 'next'
          },
          titleFormat: {
            year: 'numeric',
            month: 'short'
          },
          firstDay: 1,
          displayEventTime: false,
          eventColor: '#c4dec4',
          eventTextColor: 'rgb(30 41 59)',

          eventDidMount: function(obj) {
            obj.el.title = obj.event.title;
          },

          events: [
            {%- include functions/fetch-events.html event_type='coming' -%}
            {%- for event in events -%}
              {
                title: '{{ event.title }}',
                start: '{{ event.start_time | date: "%Y%m%dT%I%M%SZ"}}',
                end: '{{ event.end_time | date: "%Y%m%dT%I%M%SZ"}}',
                url: '{{ event.url }}'
              },
            {%- endfor -%}
          ]
        });
        calendar.render();
      });
    </script>
    <style>
      .fc .fc-toolbar.fc-header-toolbar {
        font-size: .6rem;
        margin-bottom: 0;
      }
      .fc .fc-button-primary {
        background-color: white;
        border-color: white;
        color: rgb(30 41 59);
      }
      .fc .fc-col-header-cell {
        font-weight: normal;
        background-color:rgb(203 213 225);
      }
      .fc a {
        color: rgb(30 41 59);
      }
    </style>
  {%- endif -%}

  {%- if jekyll.environment == 'production' -%}
    <!-- Matomo -->
    <script type="text/javascript">
      var _paq = window._paq = window._paq || [];
      /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
      _paq.push(['trackPageView']);
      _paq.push(['enableLinkTracking']);
      (function() {
        var u="//matomo.biodiversitydata.se/";
        _paq.push(['setTrackerUrl', u+'matomo.php']);
        _paq.push(['setSiteId', '8']);
        var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
        g.type='text/javascript'; g.async=true; g.src=u+'matomo.js'; s.parentNode.insertBefore(g,s);
      })();
    </script>
    <!-- End Matomo Code -->
  {%- endif -%}

  <script type="text/javascript">
    function toggleMobileMenu() {
      document.getElementById("topMenu").classList.toggle("hidden");
      document.getElementById("topMenuOpen").classList.toggle("hidden");
      document.getElementById("topMenuClose").classList.toggle("hidden");
    }
  </script>
</head>
